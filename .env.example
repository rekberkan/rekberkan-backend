# Application
APP_NAME="Rekberkan"
APP_ENV=production
APP_KEY=
APP_DEBUG=false  # SECURITY FIX: Bug #2 - Must be false in production
APP_URL=https://api.rekberkan.com

# Database
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=rekberkan
DB_USERNAME=postgres
DB_PASSWORD=

# Cache & Session
CACHE_DRIVER=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis

REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

# Mail
MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@rekberkan.com"
MAIL_FROM_NAME="${APP_NAME}"

# ===================================
# PAYMENT GATEWAY CONFIGURATION
# ===================================

# Default Payment Gateway
PAYMENT_GATEWAY=xendit

# Xendit (SECURITY: Use environment-specific keys)
XENDIT_API_KEY=  # NEVER commit real keys
XENDIT_PUBLIC_KEY=
XENDIT_WEBHOOK_SECRET=  # CRITICAL: Required for webhook signature verification
XENDIT_CALLBACK_URL=https://api.rekberkan.com/api/v1/webhooks/xendit
XENDIT_VERIFY_IP=true  # SECURITY FIX: Bug #4 - Enable IP verification in production

# Midtrans
MIDTRANS_MERCHANT_ID=
MIDTRANS_CLIENT_KEY=
MIDTRANS_SERVER_KEY=  # NEVER commit real keys
MIDTRANS_IS_PRODUCTION=true
MIDTRANS_IS_SANITIZED=true
MIDTRANS_IS_3DS=true
MIDTRANS_IP_WHITELIST=

# ===================================
# TRANSACTION LIMITS
# ===================================

# Deposit Limits (IDR)
DEPOSIT_MIN_AMOUNT=10000
DEPOSIT_MAX_AMOUNT=100000000

# Withdrawal Limits (IDR)
WITHDRAWAL_MIN_AMOUNT=10000
WITHDRAWAL_MAX_AMOUNT=100000000

# ===================================
# GEOIP CONFIGURATION
# ===================================

# GeoIP Service (ipapi, maxmind, ip2location)
GEOIP_SERVICE=ipapi
GEOIP_API_KEY=  # Optional for free tier

# ===================================
# RISK ENGINE CONFIGURATION
# ===================================

# Risk Thresholds (0-100)
RISK_THRESHOLD_LOW=30
RISK_THRESHOLD_MEDIUM=50
RISK_THRESHOLD_HIGH=70
RISK_THRESHOLD_CRITICAL=90

# Auto Actions
RISK_AUTO_BLOCK_THRESHOLD=90
RISK_MANUAL_REVIEW_THRESHOLD=70

# Transaction Limits
RISK_MAX_TRANSACTION_AMOUNT=100000000

# Velocity Checks
RISK_VELOCITY_ENABLED=true
RISK_MAX_DAILY_TRANSACTIONS=10
RISK_MAX_DAILY_VOLUME=50000000

# Geo Restrictions (SECURITY FIX: Bug #8)
RISK_GEO_ENABLED=true  # Enable in production
RISK_BLOCKED_COUNTRIES=KP,IR,SY,CU  # Sanctioned countries

# ===================================
# SECURITY CONFIGURATION
# ===================================

# CSP Mode
CSP_MODE=production  # strict CSP for production

# Rate Limiting (SECURITY FIX: Bug #7)
RATE_LIMIT_AUTH=10  # per 10 minutes
RATE_LIMIT_DEPOSIT=10  # per hour
RATE_LIMIT_WITHDRAWAL=5  # per hour
RATE_LIMIT_ESCROW=20  # per hour
RATE_LIMIT_ADMIN=100  # per hour

# Webhook Security
WEBHOOK_DRIFT_SECONDS=300  # 5 minutes tolerance for timestamp

# ===================================
# PAGINATION CONFIGURATION
# ===================================
# FIX: Bug #11 - Configurable pagination
PAGINATION_DEFAULT_PER_PAGE=20
PAGINATION_MAX_PER_PAGE=100

# ===================================
# MEMBERSHIP CONFIGURATION
# ===================================

# Membership Pricing (IDR/month)
MEMBERSHIP_BRONZE_PRICE=50000
MEMBERSHIP_SILVER_PRICE=150000
MEMBERSHIP_GOLD_PRICE=300000
MEMBERSHIP_PLATINUM_PRICE=500000

# Auto-renewal settings
MEMBERSHIP_AUTO_RENEW_ENABLED=true
MEMBERSHIP_RENEWAL_REMINDER_DAYS=7

# ===================================
# BLOCKCHAIN CONFIGURATION
# ===================================

BLOCKCHAIN_NETWORK=mainnet  # Use mainnet for production
BLOCKCHAIN_RPC_URL=
BLOCKCHAIN_CONTRACT_ADDRESS=

# ===================================
# LOGGING & MONITORING
# ===================================

# SECURITY FIX: Bug #12 - Use appropriate log level
LOG_CHANNEL=stack
LOG_LEVEL=warning  # Use 'warning' or 'error' for production, 'debug' for dev

# Sentry (Recommended for production)
SENTRY_LARAVEL_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.1  # 10% sampling for performance
SENTRY_ENVIRONMENT=${APP_ENV}

# ===================================
# FEATURE FLAGS
# ===================================

FEATURE_REGISTRATION_ENABLED=true
FEATURE_KYC_REQUIRED=true
FEATURE_MAINTENANCE_MODE=false

# ===================================
# SECURITY NOTES
# ===================================
# 1. NEVER commit this file with real credentials
# 2. Use strong, randomly generated keys for production
# 3. Rotate secrets regularly (every 90 days recommended)
# 4. Enable 2FA for all admin accounts
# 5. Monitor webhook logs for suspicious activity
# 6. Keep APP_DEBUG=false in production
# 7. Enable geo-blocking and IP verification
# 8. Use HTTPS only (enforce with HSTS headers)
